<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>NCC DarkCPU: src/main-10c.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="large.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">NCC DarkCPU
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('main-10c_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main-10c.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module contains the boot code for the kernel image.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a348cdb1939a7186cae04ad289a9de3c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main-10c_8c.html#a348cdb1939a7186cae04ad289a9de3c6">kernel_initThreadEp</a> (void)</td></tr>
<tr class="memdesc:a348cdb1939a7186cae04ad289a9de3c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The entrypoint of the kernel's main thread.  <a href="#a348cdb1939a7186cae04ad289a9de3c6"></a><br/></td></tr>
<tr class="separator:a348cdb1939a7186cae04ad289a9de3c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main-10c_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667">main</a> (void)</td></tr>
<tr class="memdesc:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="mdescLeft">&#160;</td><td class="mdescRight">The entrypoint of the kernel's bootcode.  <a href="#a6288eba0f8e8ad3ab1544ad731eb7667"></a><br/></td></tr>
<tr class="separator:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a32c049ceebade7874d8de3f0e915cd33"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32c049ceebade7874d8de3f0e915cd33"></a>
short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main-10c_8c.html#a32c049ceebade7874d8de3f0e915cd33">kernel_image_header</a></td></tr>
<tr class="memdesc:a32c049ceebade7874d8de3f0e915cd33"><td class="mdescLeft">&#160;</td><td class="mdescRight">kernel_image_header A pointer to the base of the Kernel Image Header <br/></td></tr>
<tr class="separator:a32c049ceebade7874d8de3f0e915cd33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c098818a7de5344139c69edd8ffcfc4"><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main-10c_8c.html#a9c098818a7de5344139c69edd8ffcfc4">kernel_sBootstrapName</a></td></tr>
<tr class="memdesc:a9c098818a7de5344139c69edd8ffcfc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">kernel_sBootstrapName A pointer to a string describing the name of the bootstrap in the initrd.  <a href="#a9c098818a7de5344139c69edd8ffcfc4"></a><br/></td></tr>
<tr class="separator:a9c098818a7de5344139c69edd8ffcfc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3538c94f8bccfb35742b32fd1642d7c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3538c94f8bccfb35742b32fd1642d7c4"></a>
short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main-10c_8c.html#a3538c94f8bccfb35742b32fd1642d7c4">kernel_size</a></td></tr>
<tr class="memdesc:a3538c94f8bccfb35742b32fd1642d7c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">kernel_size Can be interpreted as either a pointer to the end of the kernel, or, since the kernel is loaded at base address zero, the size of the kernel image. <br/></td></tr>
<tr class="separator:a3538c94f8bccfb35742b32fd1642d7c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module contains the boot code for the kernel image. </p>
<p><a class="anchor" id="BootCode"></a></p>
<p>This module contains the boot code for the kernel image, and is the first module executed in the kernel. This module is responsible for setting up kernel critical components such as the memory manager, device manager, interrupts aswell as initializing the threading manager and the clock driver. </p>
<dl class="section author"><dt>Author</dt><dd>Jeremy (0x10cforums.com) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Dec, 14, 2012 </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Use caution with use of modules such as the <a class="el" href="memory-10c_8c.html#MemoryManager">MemoryManager</a> or <a class="el" href="device-10c_8c.html">Device Manager</a> as they may not yet be initilized. Also note that if you are not inside of a thread (i.e you are still in the <a class="el" href="main-10c_8c.html#BootCode">BootCode</a> <a class="el" href="main-10c_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667">main</a> routine) use of any threading module such as Mutex or <a class="el" href="threading-10c_8c.html#ThreadingManager">ThreadingManager</a> may cause issues unless these routines explicitly state they can be used outside of a thread. </dd>
<dd>
The bootcode is under the assumption that the initrd is mounted at index 0 when it is executed. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a348cdb1939a7186cae04ad289a9de3c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kernel_initThreadEp </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The entrypoint of the kernel's main thread. </p>
<p>This routine is the origin of the first thread created, but not guaranteed to be the first executed. It performs other initilization tasks such as initilizing the HMD device or the FAT filesystem interface. </p>

</div>
</div>
<a class="anchor" id="a6288eba0f8e8ad3ab1544ad731eb7667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The entrypoint of the kernel's bootcode. </p>
<dl class="section note"><dt>Note</dt><dd>naked function <a class="el" href="calling_conventions.html#nakedCall">nakedCall</a></dd></dl>
<p>This routine is responsible for initilizing the memory manager, reserving the kernel region as well as preparing the Interrupt Service Routine and initilizing other critical modules of the kernel. </p>
<dl class="section attention"><dt>Attention</dt><dd>Be very careful in this routine as you are not in a threaded environment (Many kernel modules will assume you are.) and many modules are not initilized. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a9c098818a7de5344139c69edd8ffcfc4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kernel_sBootstrapName</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>kernel_sBootstrapName A pointer to a string describing the name of the bootstrap in the initrd. </p>
<dl class="section note"><dt>Note</dt><dd>Intended for bootstrap internal use only! </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="main-10c_8c.html">main-10c.c</a></li>
    <li class="footer">Generated on Mon Jan 14 2013 12:51:51 for NCC DarkCPU by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
