<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DarkCPU: src/memory-10c.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="large.png.bkp"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DarkCPU
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('memory-10c_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">memory-10c.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module is responsible for handling all memory inside of the system.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab27273ecae70845cfcdd5da3b6aabba0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#ab27273ecae70845cfcdd5da3b6aabba0">MEMORY_CHUNK_SIZE</a>()&#160;&#160;&#160;/* memory.10c, MEMORY_CHUNK_SIZE */</td></tr>
<tr class="separator:ab27273ecae70845cfcdd5da3b6aabba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af091671773e29dfe74c5474565a6981d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#af091671773e29dfe74c5474565a6981d">MEMORY_MAX_CHUNKS</a>()&#160;&#160;&#160;/* memory.10c, MEMORY_MAX_CHUNKS */</td></tr>
<tr class="separator:af091671773e29dfe74c5474565a6981d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ae0c80577ab2845ce96fd8b1d70378"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#ae8ae0c80577ab2845ce96fd8b1d70378">MEMORY_CHUNK_LASTINDEX</a>()&#160;&#160;&#160;/* memory.10c, MEMORY_CHUNK_LASTINDEX */</td></tr>
<tr class="separator:ae8ae0c80577ab2845ce96fd8b1d70378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4b235bbcfe5abb97d5fa126710a5be0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#ac4b235bbcfe5abb97d5fa126710a5be0">MEMORY_ALLOCATIONBITMAP_SIZE</a>()&#160;&#160;&#160;/* memory.10c, MEMORY_ALLOCATIONBITMAP_SIZE */</td></tr>
<tr class="separator:ac4b235bbcfe5abb97d5fa126710a5be0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2904e6706f052819bd3ac779f2979c52"><td class="memItemLeft" align="right" valign="top">Returns&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#a2904e6706f052819bd3ac779f2979c52">memory_allocate</a> (wSize)</td></tr>
<tr class="memdesc:a2904e6706f052819bd3ac779f2979c52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a specified region of memory.  <a href="#a2904e6706f052819bd3ac779f2979c52"></a><br/></td></tr>
<tr class="separator:a2904e6706f052819bd3ac779f2979c52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a939ab1ae0086c891150720c487b35667"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#a939ab1ae0086c891150720c487b35667">memory_copy</a> (dest, src, wSize)</td></tr>
<tr class="memdesc:a939ab1ae0086c891150720c487b35667"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a previously allocated region of memory.  <a href="#a939ab1ae0086c891150720c487b35667"></a><br/></td></tr>
<tr class="separator:a939ab1ae0086c891150720c487b35667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a720e95f776e605544d0fb71518857a6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#a720e95f776e605544d0fb71518857a6f">memory_free</a> (pBaseAddress, wSize)</td></tr>
<tr class="memdesc:a720e95f776e605544d0fb71518857a6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a previously allocated region of memory.  <a href="#a720e95f776e605544d0fb71518857a6f"></a><br/></td></tr>
<tr class="separator:a720e95f776e605544d0fb71518857a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f25b1ca1556d0890274a971d46af10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#a34f25b1ca1556d0890274a971d46af10">memory_init</a> (void)</td></tr>
<tr class="memdesc:a34f25b1ca1556d0890274a971d46af10"><td class="mdescLeft">&#160;</td><td class="mdescRight">The initilization procedure for the memory manager.  <a href="#a34f25b1ca1556d0890274a971d46af10"></a><br/></td></tr>
<tr class="separator:a34f25b1ca1556d0890274a971d46af10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac167dc8a0296c9e6a3c032db659b23e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#ac167dc8a0296c9e6a3c032db659b23e6">memory_reserve</a> (pBaseAddress, wSize)</td></tr>
<tr class="memdesc:ac167dc8a0296c9e6a3c032db659b23e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserves a region of memory that cannot be allocated.  <a href="#ac167dc8a0296c9e6a3c032db659b23e6"></a><br/></td></tr>
<tr class="separator:ac167dc8a0296c9e6a3c032db659b23e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a25c5cb14bec444b1f5ec85b33347396a"><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#a25c5cb14bec444b1f5ec85b33347396a">memory_accessMutex</a></td></tr>
<tr class="separator:a25c5cb14bec444b1f5ec85b33347396a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64af9302970399e6ada5588b6856216f"><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory-10c_8c.html#a64af9302970399e6ada5588b6856216f">memory_allocationBitmap</a></td></tr>
<tr class="separator:a64af9302970399e6ada5588b6856216f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module is responsible for handling all memory inside of the system. </p>
<p><a class="anchor" id="MemoryManager"></a></p>
<p>This subsystem performs memory operations such as allocation, freeing and reserving of memory. </p>
<dl class="section author"><dt>Author</dt><dd>Jeremy (0x10cforums.com) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Dec, 15, 2012 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ac4b235bbcfe5abb97d5fa126710a5be0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMORY_ALLOCATIONBITMAP_SIZE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;/* memory.10c, MEMORY_ALLOCATIONBITMAP_SIZE */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defines the size of the internal allocation bitmap in words. </p>

</div>
</div>
<a class="anchor" id="ae8ae0c80577ab2845ce96fd8b1d70378"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMORY_CHUNK_LASTINDEX</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;/* memory.10c, MEMORY_CHUNK_LASTINDEX */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defines the index of the last memory chunk in memory. </p>

</div>
</div>
<a class="anchor" id="ab27273ecae70845cfcdd5da3b6aabba0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMORY_CHUNK_SIZE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;/* memory.10c, MEMORY_CHUNK_SIZE */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defines the size of a single memory chunk in words. </p>

</div>
</div>
<a class="anchor" id="af091671773e29dfe74c5474565a6981d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMORY_MAX_CHUNKS</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;/* memory.10c, MEMORY_MAX_CHUNKS */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defines the maximum number of memory chuncks which can be allocated. I.e, the number of memory chuncks which constitute the system memory. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2904e6706f052819bd3ac779f2979c52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Returns memory_allocate </td>
          <td>(</td>
          <td class="paramtype">wSize&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a specified region of memory. </p>
<dl class="section note"><dt>Note</dt><dd>Uses the cdecl calling convention <a class="el" href="calling_conventions.html#cdecl">cdecl</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wSize</td><td>The size of the memory region to be allocated. This is rounded upwards to aligned with a memory chunck. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the base address of the newly allocated region of memory, or 0xFFFF is there is an insufficient amount of contigous memory chucks available for the allocation operation to succeed. </dd></dl>

</div>
</div>
<a class="anchor" id="a939ab1ae0086c891150720c487b35667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memory_copy </td>
          <td>(</td>
          <td class="paramtype">dest&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">src&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wSize&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees a previously allocated region of memory. </p>
<dl class="section note"><dt>Note</dt><dd>Uses the cdecl calling convention <a class="el" href="calling_conventions.html#cdecl">cdecl</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>Specifies the base address of the memory region to copy to </td></tr>
    <tr><td class="paramname">src</td><td>Specifies the base address of the memory region to copy from </td></tr>
    <tr><td class="paramname">wSize</td><td>The size of the memory region to copy in words. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a720e95f776e605544d0fb71518857a6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memory_free </td>
          <td>(</td>
          <td class="paramtype">pBaseAddress&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wSize&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees a previously allocated region of memory. </p>
<dl class="section note"><dt>Note</dt><dd>Uses the cdecl calling convention <a class="el" href="calling_conventions.html#cdecl">cdecl</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBaseAddress</td><td>Specifies the base address of the memory region to be freed </td></tr>
    <tr><td class="paramname">wSize</td><td>The size of the memory region to be freed. This is rounded upwards to aligned with a memory chunck. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a34f25b1ca1556d0890274a971d46af10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memory_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The initilization procedure for the memory manager. </p>
<dl class="section note"><dt>Note</dt><dd>Uses the cdecl calling convention <a class="el" href="calling_conventions.html#cdecl">cdecl</a></dd></dl>
<p>This routine is responsible for initilizing the memory manager and must be invoked prior to any other calls beloning to the memory manager module. </p>
<dl class="section attention"><dt>Attention</dt><dd>This routine must be called only once during initilization. Typically, this is done inside of the BootCode. Outside of the BootCode, this routine should not be called. </dd></dl>

</div>
</div>
<a class="anchor" id="ac167dc8a0296c9e6a3c032db659b23e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memory_reserve </td>
          <td>(</td>
          <td class="paramtype">pBaseAddress&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wSize&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserves a region of memory that cannot be allocated. </p>
<dl class="section note"><dt>Note</dt><dd>Uses the cdecl calling convention <a class="el" href="calling_conventions.html#cdecl">cdecl</a></dd></dl>
<p>This routine is responsible for reserving memory, that is, keeping the memory manager from opening such memory for allocation. Refer to <a class="el" href="_memory.html#ReservingMemory">ReservingMemory</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBaseAddress</td><td>A pointer to base of the memory region being reserved </td></tr>
    <tr><td class="paramname">wSize</td><td>The size of the memory region to reserve. This is rounded upwards to aligned with a memory chunck. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a25c5cb14bec444b1f5ec85b33347396a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memory_accessMutex</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The mutex object used to synchronize threads accessing the memory manager. I.e, to avoid two threads allocating memory at the same time. Which might result in one or the other from allocating the same region of memory. </p>

</div>
</div>
<a class="anchor" id="a64af9302970399e6ada5588b6856216f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memory_allocationBitmap</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Consists of a series of words which create the allocation bitmap. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="memory-10c_8c.html">memory-10c.c</a></li>
    <li class="footer">Generated on Sat Jan 19 2013 05:26:25 for DarkCPU by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
