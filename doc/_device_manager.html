<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>NCC DarkCPU: Device Manager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="large.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">NCC DarkCPU
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_device_manager.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Device Manager </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Device Manager  DeviceManager</h1>
<h2>Relavent Code Modules:</h2>
<p><a class="el" href="device-10c_8c.html">Device Manager</a> <a class="el" href="interrupt-10c_8c.html#InterruptManager">InterruptManager</a></p>
<h2>A Brief on The Concept of Device Management</h2>
<p>The kernel implements a device manager to allow drivers to effectivley communicate with peripheral hardware devices. The device manager contains several routines for allocating and gaining exclusive access to a device. The device manager also enables drivers to register a callback routine that will be invoked once the allocated device attempts to communicate with the driver.</p>
<p>When the kernel device manager module is initialized, it generates list of all peripheral devices attached to the machine. Each entry in this list is stored as a DEVICE_DEVICEENTRY <a class="el" href="_device_manager.html#deviceEntryLayout">deviceEntryLayout</a>. If the handler field is empty, the device is considered to be free, or not allocated.</p>
<p>Once a device has been allocated by the device manager, it will be mapped to an approriate interrupt message code. The allocating driver must configure its device to raise interrupts using that message code so that its registered callback handler will be invoked when the device raises an interrupt. Mapping the device to any other interrupt message code could cause a system error. The message code for an allocated device can be found by invoknig <a class="el" href="device-10c_8c.html#a231f45e7636a360236ad3241234df4b4">device_getDeviceInterruptMessage</a></p>
<p><a class="anchor" id="deviceEntryLayout"></a></p>
<h2>Layout of the DeviceEntry structure</h2>
<table class="doxtable">
<tr>
<th>Offset </th><th>Name </th><th>Description</th></tr>
<tr>
<td>DEVICE_DEVICEENTRY_OFFSET_HARDWAREIDLOW </td><td>wHwIdLow </td><td>Low portion of the dword describing the hardware id of the device. </td></tr>
<tr>
<td>DEVICE_DEVICEENTRY_OFFSET_HARDWAREIDHIGH </td><td>wHwIdHigh </td><td>High portion of the dword describing the hardware id of the device. </td></tr>
<tr>
<td>DEVICE_DEVICEENTRY_OFFSET_HARDWAREVERSION </td><td>wVersion </td><td>The version number of the device. </td></tr>
<tr>
<td>DEVICE_DEVICEENTRY_OFFSET_HANDLER </td><td>pHandler </td><td>A pointer to the callback routine which handles interrupts raised by this device, or 0 if the device has not been allocated. </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 14 2013 12:51:51 for NCC DarkCPU by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
